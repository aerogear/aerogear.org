<!doctype html>
<html>
<head>
  <title>AeroGear - OAuth2 Guide</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="utf-8">

  <!-- Main styles-->
  <link href="/css/styles.css" rel="stylesheet" media="screen">

  <!-- Syntax highlighting -->
  <link href="/css/syntax.css" rel="stylesheet"> 

  <!-- Icons -->
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
  <link href="/css/openshift-icons.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  
  <!-- Favicons -->
  <link rel="icon" href="/favicon.ico" type="image/x-icon">

  <script src="//code.jquery.com/jquery-1.9.1.min.js"></script>


  <!-- google analytics -->
  <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-28733717-2']);
      _gaq.push(['_setDomainName', 'aerogear.org']);
      _gaq.push(['_trackPageview']);

      (function () {
          var ga = document.createElement('script');
          ga.type = 'text/javascript';
          ga.async = true;
          ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
          var s = document.getElementsByTagName('script')[0];
          s.parentNode.insertBefore(ga, s);
      })();
  </script>
  

</head>

<body>    

<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/index.html">AeroGear</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        

        <li class="">
          <a href="/">Home</a>
        </li>

        <li class="">
          <a href="/getting-started/overview/">Getting Started</a>
        </li>


        <li class="dropdown ">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Mobile Services<span class="caret"></span></a>
            <ul class="dropdown-menu" role="menu">
              <li><a href="/services/mobile-ci-cd/">Mobile CI/CD</a></li>
              <li><a href="/services/push/">Push Notifications</a></li>
              <li><a href="/services/metrics/">Metrics</a></li>
              <li><a href="/services/runtime-connector/">Runtime Connector</a></li>
              <li><a href="/services/identity-management/">Identity Management</a></li>
              <li><a href="/services/device-security/">Device Security</a></li>
            </ul>
        </li>

        <li class="dropdown ">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Mobile SDKs<span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a href="/sdks/android/">Android</a></li>
            <li><a href="/sdks/cordova/">Cordova</li>
            <li><a href="/sdks/ios/">iOS</a></li>
            <li><a href="/sdks/xamarin/">Xamarin</a></li>
          </ul>
        </li>

        <li class="hidden-sm ">
          <a href="https://docs.aerogear.org">Docs</a>
        </li>
   
        
        <li class="">
          <a href="/community">Community</a>
        </li>
        

        <li class="">
          <a href="/news">News</a>
        </li>
        
      </ul>

    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>

<section class="main-banner">
  <div class="container">
    
  <h2>Aerogear Guides <small>Tutorials to help get you off and running.</small></h2>

  </div><!-- container -->
</section> <!-- main banner -->


<section class="guides">
  
  <div class="container">
         <ol class="breadcrumb" style="margin:0">
      <li>
        
          <a href="/getstarted/guides/">Guides</a>
        
      </li>
      <li class="active">OAuth2 Guide</li>
    </ol>
  </div><!-- container -->


  <div class="container">
    <div class="row">
      
      <div class="col-md-3 hidden-sm hidden-xs sidebar">
        <ul class="nav">
   <li class="toc_level-1 toc_section-1">
      <a href="#_overview">
         <span class="toctext">Overview</span>
      </a>
      <ul>
         <li class="toc_level-2 toc_section-2">
            <a href="#android-overview">
               <span class="toctext">Android</span>
            </a>
         </li>
         <li class="toc_level-2 toc_section-3">
            <a href="#cordova-overview">
               <span class="toctext">Apache Cordova</span>
            </a>
         </li>
         <li class="toc_level-2 toc_section-4">
            <a href="#ios-overview">
               <span class="toctext">iOS</span>
            </a>
         </li>
         <li class="toc_level-2 toc_section-5">
            <a href="#windows-overview">
               <span class="toctext">Windows</span>
            </a>
         </li>
         <li class="toc_level-2 toc_section-6">
            <a href="#_demo_applications">
               <span class="toctext">Demo applications</span>
            </a>
         </li>
      </ul>
   </li>
   <li class="toc_level-1 toc_section-7">
      <a href="#_requirements">
         <span class="toctext">Requirements</span>
      </a>
      <ul>
         <li class="toc_level-2 toc_section-8">
            <a href="#_server_side">
               <span class="toctext">Server side</span>
            </a>
         </li>
         <li class="toc_level-2 toc_section-9">
            <a href="#_android">
               <span class="toctext">Android</span>
            </a>
         </li>
         <li class="toc_level-2 toc_section-10">
            <a href="#_apache_cordova">
               <span class="toctext">Apache Cordova</span>
            </a>
         </li>
         <li class="toc_level-2 toc_section-11">
            <a href="#_ios">
               <span class="toctext">iOS</span>
            </a>
         </li>
         <li class="toc_level-2 toc_section-12">
            <a href="#_windows_phone">
               <span class="toctext">Windows Phone</span>
            </a>
         </li>
      </ul>
   </li>
   <li class="toc_level-1 toc_section-13">
      <a href="#_before_you_get_started">
         <span class="toctext">Before you get started</span>
      </a>
      <ul>
         <li class="toc_level-2 toc_section-14">
            <a href="#Google">
               <span class="toctext">Google Account Setup</span>
            </a>
         </li>
         <li class="toc_level-2 toc_section-15">
            <a href="#Facebook">
               <span class="toctext">Facebook Account Setup</span>
            </a>
         </li>
         <li class="toc_level-2 toc_section-16">
            <a href="#Keycloak">
               <span class="toctext">Keycloak</span>
            </a>
         </li>
      </ul>
   </li>
   <li class="toc_level-1 toc_section-17">
      <a href="#_getting_started">
         <span class="toctext">Getting started</span>
      </a>
      <ul>
         <li class="toc_level-2 toc_section-18">
            <a href="#_server_side_deployment">
               <span class="toctext">Server side deployment</span>
            </a>
         </li>
         <li class="toc_level-2 toc_section-19">
            <a href="#android-getting-started">
               <span class="toctext">Android</span>
            </a>
         </li>
         <li class="toc_level-2 toc_section-20">
            <a href="#cordova-getting-started">
               <span class="toctext">Apache Cordova</span>
            </a>
         </li>
         <li class="toc_level-2 toc_section-21">
            <a href="#ios-getting-started">
               <span class="toctext">iOS</span>
            </a>
         </li>
         <li class="toc_level-2 toc_section-22">
            <a href="#windows-getting-started">
               <span class="toctext">Windows Phone</span>
            </a>
         </li>
      </ul>
   </li>
   <li class="toc_level-1 toc_section-23">
      <a href="#_what_s_next">
         <span class="toctext">What’s next?</span>
      </a>
   </li>
   <li class="toc_level-1 toc_section-24">
      <a href="#_asking_for_help">
         <span class="toctext">Asking for help</span>
      </a>
   </li>
</ul>
      </div><!-- col -->
      
      <div class="col-md-9 post">
      
        <h1>OAuth2 Guide</h1>
        <div class="sect1">
<h2 id="_overview">Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Support of OAuth2 for <a href="http://keycloak.jboss.org/">Keycloak</a>, Google and Facebook on our Android, iOS, Windows and Cordova platforms.</p>
</div>
<table class="tableblock frame-topbot grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Flows</th>
<th class="tableblock halign-left valign-top">Android</th>
<th class="tableblock halign-left valign-top">iOS</th>
<th class="tableblock halign-left valign-top">JavaScript</th>
<th class="tableblock halign-left valign-top">Cordova</th>
<th class="tableblock halign-left valign-top">Windows Phone</th>
</tr>
</thead>
<tfoot>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://tools.ietf.org/html/rfc6749#section-4.1">Authorization Code
Grant</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✔</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✔</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>-</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✔</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✔</p></td>
</tr>
</tfoot>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://tools.ietf.org/html/rfc6749#section-4.2">Implicit grant flow</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>-</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>-</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>-</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>soon</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>-</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://tools.ietf.org/html/rfc6749#section-4.3">Refresh access tokens</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✔</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✔</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>-</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✔</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✔</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://tools.ietf.org/html/rfc7009#section-2">Token revocation</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>-</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✔</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>-</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>-</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>-</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://tools.ietf.org/html/rfc6749#section-4.3">Resource owner password
credentials grant</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>-</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>soon</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>-</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>-</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>-</strong></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Below are the various GitHub repositories that are part of the OAuth2 feature in AeroGear.</p>
</div>
<div class="sect2">
<h3 id="android-overview">Android</h3>
<div class="paragraph">
<p>The <a href="https://github.com/aerogear/aerogear-android-authz">AeroGear Android Authz</a> will give developers the ability to integrate their Android application with RESTful services secured with OAuth2.</p>
</div>
</div>
<div class="sect2">
<h3 id="cordova-overview">Apache Cordova</h3>
<div class="paragraph">
<p>Our <a href="https://github.com/aerogear/aerogear-oauth2-cordova">Apache Cordova plugin</a> for OAuth2 supports the following platforms:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Android</p>
</li>
<li>
<p>iOS</p>
</li>
<li>
<p>Windows</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="ios-overview">iOS</h3>
<div class="paragraph">
<p>On iOS we do have a Swift based OAuth2 client <a href="https://github.com/aerogear/aerogear-ios-oauth2">library</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="windows-overview">Windows</h3>
<div class="paragraph">
<p>For Windows we have a client library for OAuth2 on <a href="https://github.com/aerogear/aerogear-windows-oauth2">Windows phone</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_demo_applications">Demo applications</h3>
<div class="paragraph">
<p>We have a demo application, called <em>Shoot&#8217;n Share</em> for all of our supported platforms (Android, iOS, Windows and Cordova). The application allows you to upload a photo to Facebook, Google+ or a Keycloak protected backend.</p>
</div>
<div class="paragraph">
<p>The different applications can be found it the platform specific <em>cookbooks</em>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/aerogear/aerogear-android-cookbook/tree/master/ShootAndShare">Android Shoot&#8217;n Share</a></p>
</li>
<li>
<p><a href="https://github.com/aerogear/aerogear-ios-cookbook/tree/master/Shoot">iOS Shoot&#8217;n Share</a></p>
</li>
<li>
<p><a href="https://github.com/aerogear/aerogear-windows-cookbook/blob/master/Shoot/README.md">Windows Shoot&#8217;n Share</a></p>
</li>
<li>
<p><a href="https://github.com/aerogear/aerogear-cordova-cookbook/tree/master/Shoot">Cordova Shoot&#8217;n Share</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Keycloak protected backend application is a simple Java EE / JAX-RS based application. The source is located <a href="https://github.com/aerogear/aerogear-backend-cookbook/tree/master/Shoot">here</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_requirements">Requirements</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_server_side">Server side</h3>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Java 7</a></p>
</li>
<li>
<p><a href="http://download.jboss.org/wildfly/8.2.0.Final/wildfly-8.2.0.Final.tar.gz">WildFly 8.2.0.Final</a></p>
</li>
<li>
<p><a href="http://sourceforge.net/projects/keycloak/files/1.1.0.Final/">Keycloak 1.1.0.Final</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_android">Android</h3>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Java 7</a></p>
</li>
<li>
<p><a href="http://www.gradle.org/">Gradle 2.2.1</a></p>
</li>
<li>
<p><a href="https://developer.android.com/sdk/index.html">Android SDK</a> with <a href="http://developer.android.com/tools/revisions/platforms.html">platform version 21</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_apache_cordova">Apache Cordova</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://nodejs.org/">Node.js</a> and <a href="https://www.npmjs.com/">npm</a></p>
</li>
<li>
<p><a href="http://cordova.apache.org/docs/en/4.0.0/guide_cli_index.md.html">Cordova installed</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_ios">iOS</h3>
<div class="ulist">
<ul>
<li>
<p><a href="http://guides.cocoapods.org/using/getting-started.html#getting-started">Cocoapods 0.36.0.x</a></p>
</li>
<li>
<p><a href="https://developer.apple.com/xcode/downloads/">XCode 6.2</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_windows_phone">Windows Phone</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.visualstudio.com/en-us/downloads/download-visual-studio-vs.aspx">Visual Studio 2013</a></p>
</li>
<li>
<p><a href="https://docs.nuget.org/consume/installing-nuget">nuget</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_before_you_get_started">Before you get started</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The OAuth2 examples described in this guide require some previous setup to make <code>Keycloak</code>, <code>Facebook</code> and <code>Google</code> work. Please follow the steps listed below.</p>
</div>
<div class="sect2">
<h3 id="Google">Google Account Setup</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>First, you must authenticate with Google. You will need a Google Account
for this. Now open the <a href="http://console.developer.google.com">Google
Console</a>.</p>
</li>
<li>
<p>If you haven&#8217;t created a project, click "Create Project" and give the
new project a name:</p>
<div class="paragraph">
<p><span class="image"><img src="/docs/guides/security/img/google-console-1.png" alt="Google Console - Create Project"></span></p>
</div>
</li>
<li>
<p>Now you enable the Drive API. To do that, navigate to APIs &amp;
auth &gt; APIs and scroll down to the Drive API item, which you need to
turn on:</p>
<div class="paragraph">
<p><span class="image"><img src="/docs/guides/security/img/google-console-2.png" alt="Google Console - Enable APIs"></span></p>
</div>
</li>
<li>
<p>Create new credentials to access your Drive accounts from
the app. Go to APIs &amp; auth &gt; Credentials and inside OAuth area click the
blue <code>Create new Client ID</code> button.</p>
<div class="paragraph">
<p><span class="image"><img src="/docs/guides/security/img/google-console-3.png" alt="Google Console - Create client ID"></span></p>
</div>
</li>
<li>
<p>You will need to create a <em>consent screen</em>. Click the blue
<code>Configure consent screen</code></p>
<div class="imageblock">
<div class="content">
<img src="/docs/guides/security/img/google-console-4.png" alt="Google Console - Consent screen">
</div>
</div>
</li>
<li>
<p>Afterwards, click save and you will return to the Client ID. Select <code>Installed application</code> and <code>iOS</code> and fill in your <code>bundle ID</code>, these settings will work for Android and iOS:</p>
<div class="paragraph">
<p><span class="image"><img src="/docs/guides/security/img/google-console-5.png" alt="Google Console - Create client ID"></span></p>
</div>
</li>
<li>
<p>On the last screen we finally get to see the actual value of the
generated <code>client id</code>, <code>secret id</code> and <code>redirect uris</code>, which you will
use later:</p>
<div class="paragraph">
<p><span class="image"><img src="/docs/guides/security/img/google-console-6.png" alt="Google Console - Credentials"></span></p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Facebook">Facebook Account Setup</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>First you must have a Facebook account. Now open the
<a href="https://developers.facebook.com/">Facebook Developers</a> page and select
<code>Apps</code> &#8594; <code>Add a New App</code></p>
<div class="paragraph">
<p><span class="image"><img src="/docs/guides/security/img/facebook-1.png" alt="Facebook - Add App"></span></p>
</div>
</li>
<li>
<p>Create a new app and select <code>Website</code> as platform</p>
<div class="paragraph">
<p><span class="image"><img src="/docs/guides/security/img/facebook-2.png" alt="Facebook - Select platform"></span></p>
</div>
</li>
<li>
<p>Click <code>Skip and Create App ID</code></p>
<div class="paragraph">
<p><span class="image"><img src="/docs/guides/security/img/facebook-3.png" alt="Facebook - Skip and Create App ID"></span></p>
</div>
</li>
<li>
<p>Setup a Display Name and Namespace and select a category, then click
<code>Create App ID</code></p>
<div class="paragraph">
<p><span class="image"><img src="/docs/guides/security/img/facebook-4.png" alt="Facebook - Choice app category"></span></p>
</div>
</li>
<li>
<p>Fill out the captcha</p>
</li>
<li>
<p>Now on the Dashboard view. Make a note of your <code>App ID</code> and
<code>App Secret</code>.</p>
<div class="paragraph">
<p><span class="image"><img src="/docs/guides/security/img/facebook-5.png" alt="Facebook - Dashboard"></span></p>
</div>
</li>
<li>
<p>Select <code>Settings</code> from the sidebar and then the <code>Advanced</code> tab</p>
<div class="paragraph">
<p><span class="image"><img src="/docs/guides/security/img/facebook-6.png" alt="Facebook - Advanced Tab"></span></p>
</div>
</li>
<li>
<p>Scroll to Security and enable <code>Embedded browser OAuth Login</code> and make
<code><a href="https://localhost/" class="bare">https://localhost/</a></code> your redirectURI</p>
<div class="paragraph">
<p><span class="image"><img src="/docs/guides/security/img/facebook-7.png" alt="Facebook - Enable OAuth"></span></p>
</div>
<div class="paragraph">
<p>Now save your changes and Facebook is ready to go.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Keycloak">Keycloak</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Download Keycloak Appliance Distribution version <a href="http://sourceforge.net/projects/keycloak/files/1.1.0.Final/">1.1.0.Final</a></p>
</li>
<li>
<p>Start the server</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ KEYCLOAK_APPLIANCE_HOME/keycloak/bin/standalone.sh -b 0.0.0.0</code></pre>
</div>
</div>
<div class="paragraph">
<p>A quick screencast can be seen <a href="https://asciinema.org/a/16876">here</a>.</p>
</div>
</li>
<li>
<p>Open <a href="http://localhost:8080/auth/admin/index.html">http://localhost:8080/auth/admin/index.html</a></p>
<div class="paragraph">
<p><span class="image"><img src="/docs/guides/security/img/keycloak-1.jpg" alt="Keycloak - Login page"></span></p>
</div>
</li>
<li>
<p>Login using <strong>Username</strong>: <em>admin</em> / <strong>Password</strong>: <em>admin</em></p>
</li>
<li>
<p>Insert a new password</p>
</li>
<li>
<p>Click on <code>Add realm</code></p>
<div class="paragraph">
<p><span class="image"><img src="/docs/guides/security/img/keycloak-2.jpg" alt="Keycloak - Realm configuration"></span></p>
</div>
</li>
<li>
<p>Import the <a href="https://raw.githubusercontent.com/aerogear/aerogear-backend-cookbook/master/Shoot/configuration/shoot-realm.json">realm configuration file</a></p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_getting_started">Getting started</h2>
<div class="sectionbody">
<div class="paragraph">
<p>AeroGear integrates with several OAuth2 providers. If you already have an existing mobile application, please select a platform and follow one of the steps below.</p>
</div>
<div class="paragraph">
<p>All the examples described here are based on our demo application, called Shoot&#8217;nShare.</p>
</div>
<div class="sect2">
<h3 id="_server_side_deployment">Server side deployment</h3>
<div class="paragraph">
<p>Most of the examples do not require an application server to work, but if you&#8217;re planning to use <a href="http://keycloak.jboss.org/">Keycloak</a> as security provider, <a href="http://wildfly.org/">WildFly</a> is required.</p>
</div>
<div class="paragraph">
<p>Assuming that all the instructions described <a href="#Keycloak">here</a> were properly followed, now deploy our example server:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>$ git clone git@github.com:aerogear/aerogear-backend-cookbook.git &amp;&amp; cd aerogear-backend-cookbook
$ cd Shoot
$ mvn clean install
$ mvn wildfly:deploy</code></pre>
</div>
</div>
<div class="paragraph">
<p>Keep in mind that the example server is not required to connect with <a href="http://keycloak.jboss.org/">Keycloak</a>. Shoot&#8217;nShare server only showcase an end-to-end security integration in real life and display the uploaded photos.</p>
</div>
</div>
<div class="sect2">
<h3 id="android-getting-started">Android</h3>
<div class="paragraph">
<p>To download one of our examples, check our <a href="https://github.com/aerogear/aerogear-android-cookbook/releases">cookbooks</a>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Adding AeroGear to the project</p>
<div class="listingblock">
<div class="title"><a href="https://github.com/aerogear/aerogear-android-cookbook/blob/master/ShootAndShare/app/build.gradle">build.gradle</a></div>
<div class="content">
<pre class="highlight"><code>compile ('org.jboss.aerogear:aerogear-android-authz:2.0.0') {
    exclude module : 'compatibility-v4'
    transitive = true
}</code></pre>
</div>
</div>
</li>
<li>
<p>Add the <code>android.permission.INTERNET</code> permission:</p>
<div class="listingblock">
<div class="title"><a href="https://github.com/aerogear/aerogear-android-cookbook/blob/master/ShootAndShare/app/src/main/AndroidManifest.xml">AndroidManifest.xml</a></div>
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;uses-permission android:name="android.permission.INTERNET"/&gt;</code></pre>
</div>
</div>
</li>
<li>
<p>Then add the following entries to <code>AndroidManifest.xml</code> inside the <code>&lt;application&gt;</code> tag:</p>
<div class="listingblock">
<div class="title"><a href="https://github.com/aerogear/aerogear-android-cookbook/blob/master/ShootAndShare/app/src/main/AndroidManifest.xml">AndroidManifest.xml</a></div>
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;application&gt;
    &lt;service android:name="org.jboss.aerogear.android.authorization.oauth2.OAuth2AuthzService"/&gt;
&lt;/application&gt;</code></pre>
</div>
</div>
</li>
<li>
<p>Initialise the <code>AuthorizationManager</code>.</p>
<div class="paragraph">
<p>First create a helper class and add these lines of code:</p>
</div>
<ul class="nav nav-tabs nav-snippets">
  <li class="active"><a href="#keycloak-oauth2-android-auth-manager"><i class="fa fa-shield"></i> Keycloak</a></li>
  <li><a href="#facebook-oauth2-android-auth-manager" title="Facebook"><i class="fa fa-facebook"></i> Facebook</a></li>
  <li><a href="#google-oauth2-android-auth-manager" title="Google"><i class="fa fa-google"></i> Google</a></li>
</ul>
<script defer src="/js/code-snippets.js"></script>

<div id="keycloak-oauth2-android-auth-manager" class="snippet-oauth2-android-auth-manager">
</br>
<a href="https://github.com/aerogear/aerogear-android-cookbook/blob/master/ShootAndShare/app/src/main/java/org/jboss/aerogear/android/cookbook/shootandshare/util/KeycloakHelper.java"><i class="fa fa-paperclip"></i> Copy & paste</a>
<pre class="highlight">
AuthorizationManager.config("KeyCloakAuthz", OAuth2AuthorizationConfiguration.class)
        .setBaseURL(new URL("http://localhost:8080/auth"))
        .setClientId("shoot-third-party")
        .setAuthzEndpoint("/realms/shoot-realm/protocol/openid-connect/auth")
        .setAccessTokenEndpoint("/realms/shoot-realm/protocol/openid-connect/token")
        .setRefreshEndpoint("/realms/shoot-realm/protocol/openid-connect/token")
        .setAccountId("keycloak-token")
        .setRedirectURL("http://oauth2callback")
        .asModule();
</pre>
</div>

<div id="facebook-oauth2-android-auth-manager" class="snippet-oauth2-android-auth-manager" style="display: none">
</br>
<a href="https://github.com/aerogear/aerogear-android-cookbook/blob/master/ShootAndShare/app/src/main/java/org/jboss/aerogear/android/cookbook/shootandshare/util/FacebookHelper.java"><i class="fa fa-paperclip"></i> Copy & paste</a>
<pre class="highlight">
AuthorizationManager.config("FacebookOAuth", OAuth2AuthorizationConfiguration.class)
        .setBaseURL(new URL("https://"))
        .setClientId("replace me")
        .setClientSecret("replace me")
        .setAuthzEndpoint("www.facebook.com/dialog/oauth")
        .setAccessTokenEndpoint("graph.facebook.com/oauth/access_token")
        .setAccountId("facebook-token")
        .setRedirectURL("https://localhost/")
        .setRefreshEndpoint("graph.facebook.com/oauth/access_token")
        .addAdditionalAccessParam(Pair.create("response_type", "code"))
        .setScopes(Arrays.asList("photo_upload, publish_actions"))
        .asModule();
</pre>
</div>

<div id="google-oauth2-android-auth-manager" class="snippet-oauth2-android-auth-manager" style="display: none">
</br>
<a href="https://github.com/aerogear/aerogear-android-cookbook/blob/master/ShootAndShare/app/src/main/java/org/jboss/aerogear/android/cookbook/shootandshare/util/GooglePlusHelper.java"><i class="fa fa-paperclip"></i> Copy & paste</a>
<pre class="highlight">
AuthorizationManager.config("GoogleDriveAuthz", OAuth2AuthorizationConfiguration.class)
        .setBaseURL(new URL("https://accounts.google.com"))
        .setClientId("replace me")
        .setClientSecret("replace me")
        .setAuthzEndpoint("/o/oauth2/auth")
        .setAccessTokenEndpoint("/o/oauth2/token")
        .setRefreshEndpoint("/o/oauth2/token")
        .setAccountId("google-token")
        .setRedirectURL("http://localhost")
        .setScopes(Arrays.asList("https://www.googleapis.com/auth/drive"))
        .addAdditionalAuthorizationParam(Pair.create("access_type", "offline"))
        .asModule();
</pre>
</div>
<div class="paragraph">
<p>Please make sure to use the proper <code>client ID</code> and <code>client secret</code> for your application.</p>
</div>
</li>
<li>
<p>Create a model class</p>
<div class="paragraph">
<p>The Android library will automatically marshall the HTTP request payload from OAuth2 providers. For more detailed information, please visit the <a href="/docs/guides/aerogear-android/pipe">Android documentation</a>.</p>
</div>
<div class="listingblock">
<div class="title"><a href="https://github.com/aerogear/aerogear-android-cookbook/blob/master/ShootAndShare/app/src/main/java/org/jboss/aerogear/android/cookbook/shootandshare/model/PhotoHolder.java">PhotoHolder - copy &amp; paste</a></div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public class PhotoHolder {

    @RecordId
    private String id = null;

    private String title, message;
    private File image;
    //getters and setters
}</code></pre>
</div>
</div>
</li>
<li>
<p>PipeManager configuration</p>
<div class="paragraph">
<p>Now you can configure the <a href="/docs/guides/aerogear-android/pipe">PipeManager</a> to make use of the <code>AuthorizationManager</code> previously initialised.</p>
</div>
<ul class="nav nav-tabs nav-snippets">
  <li class="active"><a href="#keycloak-oauth2-pipe-manager"><i class="fa fa-shield"></i> Keycloak</a></li>
  <li><a href="#facebook-oauth2-pipe-manager" title="Facebook"><i class="fa fa-facebook"></i> Facebook</a></li>
  <li><a href="#google-oauth2-pipe-manager" title="Google"><i class="fa fa-google"></i> Google</a></li>
</ul>
<script defer src="/js/code-snippets.js"></script>

<div id="keycloak-oauth2-pipe-manager" class="snippet-oauth2-pipe-manager">
</br>
<a href="https://github.com/aerogear/aerogear-android-cookbook/blob/master/ShootAndShare/app/src/main/java/org/jboss/aerogear/android/cookbook/shootandshare/util/KeycloakHelper.java"><i class="fa fa-paperclip"></i> Copy & paste</a>
<pre class="highlight">
PipeManager.config("kc-upload", RestfulPipeConfiguration.class)
        .module(AuthorizationManager.getModule("KeyCloakAuthz"))
        .withUrl(new URL("http://localhost:8080/shoot/rest/photos"))
        .requestBuilder(new MultipartRequestBuilder())
        .forClass(PhotoHolder.class);
</pre>
</div>

<div id="facebook-oauth2-pipe-manager" class="snippet-oauth2-pipe-manager" style="display: none">
</br>
<a href="https://github.com/aerogear/aerogear-android-cookbook/blob/master/ShootAndShare/app/src/main/java/org/jboss/aerogear/android/cookbook/shootandshare/util/FacebookHelper.java"><i class="fa fa-paperclip"></i> Copy & paste</a>
<pre class="highlight">
PipeManager.config("fb-upload", RestfulPipeConfiguration.class)
        .module(AuthorizationManager.getModule("FacebookOAuth"))
        .withUrl(new URL("https://graph.facebook.com/me/photos"))
        .requestBuilder( new MultipartRequestBuilder())
        .forClass(PhotoHolder.class);
</pre>
</div>

<div id="google-oauth2-pipe-manager" class="snippet-oauth2-pipe-manager" style="display: none">
</br>
<a href="https://github.com/aerogear/aerogear-android-cookbook/blob/master/ShootAndShare/app/src/main/java/org/jboss/aerogear/android/cookbook/shootandshare/util/GooglePlusHelper.java"><i class="fa fa-paperclip"></i> Copy & paste</a>
<pre class="highlight">
PipeManager.config("gp-upload", RestfulPipeConfiguration.class)
        .module(AuthorizationManager.getModule(GoogleDriveAuthz))
        .withUrl(new URL("https://www.googleapis.com/upload/drive/v2/files?uploadType=multipart"))
        .requestBuilder(new GoogleDriveFileUploadRequestBuilder())
        .forClass(PhotoHolder.class);
</pre>
</div>
<div class="paragraph">
<p>Please make sure to use the proper <code>client ID</code> and <code>client secret</code> for your application.</p>
</div>
</li>
<li>
<p>Request access</p>
<div class="paragraph">
<p>Finally, you need to request access to the OAuth2 provider. Make sure to create a new method for the helper class and inform the module name. The possible values are: <code>KeyCloakAuthz</code>, <code>FacebookOAuth</code> and <code>GoogleDriveAuthz</code>.</p>
</div>
<div class="listingblock">
<div class="title"><a href="https://github.com/aerogear/aerogear-android-cookbook/blob/master/ShootAndShare/app/src/main/java/org/jboss/aerogear/android/cookbook/shootandshare/util/KeycloakHelper.java">Copy &amp; paste</a></div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">final AuthzModule authzModule = AuthorizationManager.getModule(&lt;module name&gt;);

authzModule.requestAccess(activity, new Callback&lt;String&gt;() {
    @Override
    public void onSuccess(String s) {
        callback.onSuccess(s);
    }

    @Override
    public void onFailure(Exception e) {
        if (!e.getMessage().matches(OAuthWebViewDialog.OAuthReceiver.DISMISS_ERROR)) {
            authzModule.deleteAccount();
        }
        callback.onFailure(e);
    }
});</code></pre>
</div>
</div>
</li>
<li>
<p>You are legendary!</p>
<div class="paragraph">
<p>Congratulations, we&#8217;re done here! You followed all the steps to heaven and now it&#8217;s time to celebrate.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="cordova-getting-started">Apache Cordova</h3>
<div class="paragraph">
<p>To download one of our examples, check our <a href="https://github.com/aerogear/aerogear-cordova-cookbook">cookbooks</a>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Adding AeroGear to the project</p>
<div class="listingblock">
<div class="title"><a href="https://github.com/aerogear/aerogear-cordova-cookbook/blob/master/Shoot/config.xml">config.xml</a></div>
<div class="content">
<pre class="highlight"><code>$ cordova plugin add aerogear-cordova-oauth2</code></pre>
</div>
</div>
</li>
<li>
<p>Configure Info.plist file</p>
<div class="paragraph">
<p>Add the <code>CFBundleURLTypes</code> key or skip this step if you have no plans to connect with Facebook or deploy on iOS.</p>
</div>
<div class="listingblock">
<div class="title"><a href="https://github.com/aerogear/aerogear-ios-cookbook/blob/master/Shoot/Shoot/Info.plist">Info.plist</a></div>
<div class="content">
<pre class="highlight"><code>&lt;key&gt;CFBundleURLTypes&lt;/key&gt;
&lt;array&gt;
    &lt;dict&gt;
        &lt;key&gt;CFBundleURLSchemes&lt;/key&gt;
        &lt;array&gt;
            &lt;string&gt;org.aerogear.Shoot&lt;/string&gt;
            &lt;string&gt;fbYYY&lt;/string&gt;
        &lt;/array&gt;
    &lt;/dict&gt;
&lt;/array&gt;</code></pre>
</div>
</div>
</li>
<li>
<p>Add the OAuth2 provider configuration</p>
<ul class="nav nav-tabs nav-snippets">
  <li class="active"><a href="#keycloak-oauth2-cordova-config"><i class="fa fa-shield"></i> Keycloak</a></li>
  <li><a href="#facebook-oauth2-cordova-config" title="Facebook"><i class="fa fa-facebook"></i> Facebook</a></li>
  <li><a href="#google-oauth2-cordova-config" title="Google"><i class="fa fa-google"></i> Google</a></li>
</ul>
<script defer src="/js/code-snippets.js"></script>

<div id="keycloak-oauth2-cordova-config" class="snippet-oauth2-cordova-config">
</br>
<a href="https://github.com/aerogear/aerogear-cordova-cookbook/blob/master/Shoot/www/js/app.js"><i class="fa fa-paperclip"></i> Copy & paste</a>
<pre class="highlight">
oauth2.addKeycloak({
  name: 'keycloak',
  settings: {
    base: '<location of keycloak server e.g. http://192.168.0.12:8080/auth>',
    //when you use the shoot and share backend these do not need to change
    clientId: 'shoot-third-party',
    realm: 'shoot-realm'
  }
});
</pre>
</div>

<div id="facebook-oauth2-cordova-config" class="snippet-oauth2-cordova-config" style="display: none">
</br>
<a href="https://github.com/aerogear/aerogear-cordova-cookbook/blob/master/Shoot/www/js/app.js"><i class="fa fa-paperclip"></i> Copy & paste</a>
<pre class="highlight">
oauth2.addFacebook({
  name: 'facebook',
  settings: {
    //On iOS, be sure to also update the <project_name>-Info.plist file with the clientId
    clientId: '<your client id goes here>',
    clientSecret: '<your client secret goes here>',
    scopes: 'photo_upload, publish_actions'
  }
});

</pre>
</div>

<div id="google-oauth2-cordova-config" class="snippet-oauth2-cordova-config" style="display: none">
</br>
<a href="https://github.com/aerogear/aerogear-cordova-cookbook/blob/master/Shoot/www/js/app.js"><i class="fa fa-paperclip"></i> Copy & paste</a>
<pre class="highlight">
oauth2.addGoogle({
  name: 'gplus',
  settings: {
    //replace with your own if you want to...
    clientId: '<your client secret goes here.apps.googleusercontent.com>',
    scopes: 'https://www.googleapis.com/auth/drive'
  }
});
</pre>
</div>
<div class="paragraph">
<p>Please make sure to use the proper <code>client ID</code> and <code>client secret</code> for your application.</p>
</div>
</li>
<li>
<p>Deploy</p>
<ul class="nav nav-tabs nav-snippets">
  <li class="active"><a href="#android-oauth2-cordova-deploy"><i class="fa fa-android"></i> Android</a></li>
  <li><a href="#ios-oauth2-cordova-deploy" title="Facebook"><i class="fa fa-apple"></i> iOS</a></li>
</ul>
<script defer src="/js/code-snippets.js"></script>

<div id="android-oauth2-cordova-deploy" class="snippet-oauth2-cordova-deploy">
<pre class="highlight">
$ cordova run android
</pre>
</div>

<div id="ios-oauth2-cordova-deploy" class="snippet-oauth2-cordova-deploy" style="display: none">
<pre class="highlight">
$ cordova run ios
</pre>
</div>
</li>
<li>
<p>You are legendary!</p>
<div class="paragraph">
<p>Congratulations, we&#8217;re done here! You followed all the steps to heaven and now it&#8217;s time to celebrate.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="ios-getting-started">iOS</h3>
<div class="paragraph">
<p>To download one of our examples, check our <a href="https://github.com/aerogear/aerogear-ios-cookbook/releases/">cookbooks</a>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Adding AeroGear to the project</p>
<div class="listingblock">
<div class="title"><a href="https://github.com/aerogear/aerogear-ios-cookbook/blob/master/Shoot/Podfile">Podfile</a></div>
<div class="content">
<pre class="highlight"><code>pod 'AeroGearHttp', '0.2.0'
pod 'AeroGearOAuth2', '0.2.1'</code></pre>
</div>
</div>
</li>
<li>
<p>Configure Info.plist file</p>
<div class="paragraph">
<p>Add the <code>CFBundleURLTypes</code> key or skip this step if you have no plans to connect with Facebook.</p>
</div>
<div class="listingblock">
<div class="title"><a href="https://github.com/aerogear/aerogear-ios-cookbook/blob/master/Shoot/Shoot/Info.plist">Info.plist</a></div>
<div class="content">
<pre class="highlight"><code>&lt;key&gt;CFBundleURLTypes&lt;/key&gt;
&lt;array&gt;
    &lt;dict&gt;
        &lt;key&gt;CFBundleURLSchemes&lt;/key&gt;
        &lt;array&gt;
            &lt;string&gt;org.aerogear.Shoot&lt;/string&gt;
            &lt;string&gt;fbYYY&lt;/string&gt;
        &lt;/array&gt;
    &lt;/dict&gt;
&lt;/array&gt;</code></pre>
</div>
</div>
</li>
<li>
<p>Create a <code>ViewController</code> class and instantiate the <code>Http</code> class</p>
<div class="paragraph">
<p>For more detailed information about the HTTP module, please visit the <a href="/docs/guides/aerogear-ios-2.X/HttpLib/">iOS documentation</a>.</p>
</div>
<div class="listingblock">
<div class="title"><a href="https://github.com/aerogear/aerogear-ios-cookbook/blob/master/Shoot/Shoot/ViewController.swift">ViewController.swift</a></div>
<div class="content">
<pre class="highlight"><code>var Http = Http()</code></pre>
</div>
</div>
</li>
<li>
<p>Initialise the OAuth2 provider configuration</p>
<ul class="nav nav-tabs nav-snippets">
  <li class="active"><a href="#keycloak-oauth2-ios-config"><i class="fa fa-shield"></i> Keycloak</a></li>
  <li><a href="#facebook-oauth2-ios-config" title="Facebook"><i class="fa fa-facebook"></i> Facebook</a></li>
  <li><a href="#google-oauth2-ios-config" title="Google"><i class="fa fa-google"></i> Google</a></li>
</ul>
<script defer src="/js/code-snippets.js"></script>

<div id="keycloak-oauth2-ios-config" class="snippet-oauth2-ios-config">
</br>
<a href="https://github.com/aerogear/aerogear-ios-cookbook/blob/master/Shoot/Shoot/ViewController.swift"><i class="fa fa-paperclip"></i> Copy & paste</a>
<pre class="highlight">
let keycloakHost = "http://localhost:8080"
let keycloakConfig = KeycloakConfig(
    clientId: "shoot-third-party",
    host: keycloakHost,
    realm: "shoot-realm")
</pre>
</div>

<div id="facebook-oauth2-ios-config" class="snippet-oauth2-ios-config" style="display: none">
</br>
<a href="https://github.com/aerogear/aerogear-ios-cookbook/blob/master/Shoot/Shoot/ViewController.swift"><i class="fa fa-paperclip"></i> Copy & paste</a>
<pre class="highlight">
let facebookConfig = FacebookConfig(
    clientId: "YYY",
    clientSecret: "XXX",
    scopes:["photo_upload, publish_actions"])
</pre>
</div>

<div id="google-oauth2-ios-config" class="snippet-oauth2-ios-config" style="display: none">
</br>
<a href="https://github.com/aerogear/aerogear-ios-cookbook/blob/master/Shoot/Shoot/ViewController.swift"><i class="fa fa-paperclip"></i> Copy & paste</a>
<pre class="highlight">
let googleConfig = GoogleConfig(
    clientId: "<your client secret goes here.apps.googleusercontent.com>",
    scopes:["https://www.googleapis.com/auth/drive"])
</pre>
</div>
<div class="paragraph">
<p>Please make sure to use the proper <code>client ID</code> and <code>client secret</code> for your application.</p>
</div>
</li>
<li>
<p>Add the OAuth2 configuration to the <code>AccountManager</code></p>
<ul class="nav nav-tabs nav-snippets">
  <li class="active"><a href="#keycloak-oauth2-ios-manager"><i class="fa fa-shield"></i> Keycloak</a></li>
  <li><a href="#facebook-oauth2-ios-manager" title="Facebook"><i class="fa fa-facebook"></i> Facebook</a></li>
  <li><a href="#google-oauth2-ios-manager" title="Google"><i class="fa fa-google"></i> Google</a></li>
</ul>
<script defer src="/js/code-snippets.js"></script>

<div id="keycloak-oauth2-ios-manager" class="snippet-oauth2-ios-manager">
</br>
<a href="https://github.com/aerogear/aerogear-ios-cookbook/blob/master/Shoot/Shoot/ViewController.swift"><i class="fa fa-paperclip"></i> Copy & paste</a>
<pre class="highlight">
let keycloakModule = AccountManager.addKeycloakAccount(keycloakConfig)
</pre>
</div>

<div id="facebook-oauth2-ios-manager" class="snippet-oauth2-ios-manager" style="display: none">
</br>
<a href="https://github.com/aerogear/aerogear-ios-cookbook/blob/master/Shoot/Shoot/ViewController.swift"><i class="fa fa-paperclip"></i> Copy & paste</a>
<pre class="highlight">
let facebookModule =  AccountManager.addFacebookAccount(facebookConfig)
</pre>
</div>

<div id="google-oauth2-ios-manager" class="snippet-oauth2-ios-manager" style="display: none">
</br>
<a href="https://github.com/aerogear/aerogear-ios-cookbook/blob/master/Shoot/Shoot/ViewController.swift"><i class="fa fa-paperclip"></i> Copy & paste</a>
<pre class="highlight">
let googleModule = AccountManager.addGoogleAccount(googleConfig)
</pre>
</div>
</li>
<li>
<p>Inject the OAuth2 module into HTTP object</p>
<ul class="nav nav-tabs nav-snippets">
  <li class="active"><a href="#keycloak-oauth2-ios-inject"><i class="fa fa-shield"></i> Keycloak</a></li>
  <li><a href="#facebook-oauth2-ios-inject" title="Facebook"><i class="fa fa-facebook"></i> Facebook</a></li>
  <li><a href="#google-oauth2-ios-inject" title="Google"><i class="fa fa-google"></i> Google</a></li>
</ul>
<script defer src="/js/code-snippets.js"></script>

<div id="keycloak-oauth2-ios-inject" class="snippet-oauth2-ios-inject">
</br>
<a href="https://github.com/aerogear/aerogear-ios-cookbook/blob/master/Shoot/Shoot/ViewController.swift"><i class="fa fa-paperclip"></i> Copy & paste</a>
<pre class="highlight">
self.http.authzModule = keycloakModule
</pre>
</div>

<div id="facebook-oauth2-ios-inject" class="snippet-oauth2-ios-inject" style="display: none">
</br>
<a href="https://github.com/aerogear/aerogear-ios-cookbook/blob/master/Shoot/Shoot/ViewController.swift"><i class="fa fa-paperclip"></i> Copy & paste</a>
<pre class="highlight">
self.http.authzModule = facebookModule
</pre>
</div>

<div id="google-oauth2-ios-inject" class="snippet-oauth2-ios-inject" style="display: none">
</br>
<a href="https://github.com/aerogear/aerogear-ios-cookbook/blob/master/Shoot/Shoot/ViewController.swift"><i class="fa fa-paperclip"></i> Copy & paste</a>
<pre class="highlight">
self.http.authzModule = googleModule
</pre>
</div>
</li>
<li>
<p>Create a method to send the HTTP request</p>
<div class="paragraph">
<p>Finally, send an HTTP request to make sure that everything is fine. Make sure to create a separate method for this.</p>
</div>
<div class="listingblock">
<div class="title"><a href="https://github.com/aerogear/aerogear-ios-cookbook/blob/master/Shoot/Shoot/ViewController.swift">Copy &amp; paste</a></div>
<div class="content">
<pre class="highlight"><code>func performUpload(url: String, parameters: [String: AnyObject]?) {
    self.http.POST(url, parameters: parameters, completionHandler: {(response, error) in
        if (error != nil) {
            self.presentAlert("Error", message: error!.localizedDescription)
        } else {
            self.presentAlert("Success", message: "Successfully uploaded!")
        }
    })
}</code></pre>
</div>
</div>
</li>
<li>
<p>You are legendary!</p>
<div class="paragraph">
<p>Congratulations, we&#8217;re done here! You followed all the steps to heaven and now it&#8217;s time to celebrate.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="windows-getting-started">Windows Phone</h3>
<div class="paragraph">
<p>To download one of our examples, check <a href="https://github.com/aerogear/aerogear-windows-oauth2">the sources</a>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Application configuration</p>
<div class="paragraph">
<p>Go to Visual Studio and open <code>Package.appxmanifest</code> go to <code>Declarations</code> add a protocol and set the bundle id you picked on the google console.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="/docs/guides/security/img/windows-protocol-config.png" alt="Protocol configuration"></span></p>
</div>
<div class="paragraph">
<p>Next step is setting up the account in code, replace the <code>&lt;google-client-id&gt;</code> with your google <code>client id</code>.</p>
</div>
</li>
<li>
<p>Initialise the OAuth2 provider configuration</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>var config = await GoogleConfig.Create(
    "&lt;google-client-id&gt;",
    new List&lt;string&gt;(new string[] { "https://www.googleapis.com/auth/drive" }),
    "google"
);</code></pre>
</div>
</div>
</li>
<li>
<p>Add the OAuth2 configuration to the <code>AccountManager</code></p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>var googleModule = await AccountManager.AddAccount(config);</code></pre>
</div>
</div>
</li>
<li>
<p>Request access</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>if (await module.RequestAccessAndContinue())
{
    Upload(module);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>if the result is <code>true</code> the app will not be suspended and we can for instance upload to Google Drive, like in this example. Otherwise the app will be suspended and an authentication dialog will appear.</p>
</div>
<div class="paragraph">
<p>To handle the continuation event, include <a href="http://msdn.microsoft.com/en-us/library/dn631755.aspx">continuation manager</a> in you app. Or implement everything by yourself:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>protected async override void OnActivated(IActivatedEventArgs args)
{
    if (args.Kind == ActivationKind.WebAuthenticationBrokerContinuation)
    {
        //get a reference to the page as IWebAuthenticationContinuable
        var wabPage = rootFrame.Content as IWebAuthenticationContinuable;
        wabPage.ContinueWebAuthentication(args as WebAuthenticationBrokerContinuationEventArgs);
    }
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>The page will have to implement the <code>IWebAuthenticationContinuable</code> interface like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>async void IWebAuthenticationContinuable.ContinueWebAuthentication(WebAuthenticationBrokerContinuationEventArgs args)
{
    Upload(await AccountManager.ParseContinuationEvent(args));
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will parse the <code>ContinuationEvent</code> and save the token from the OAuth provider (in this case Google) to the device. So the next time user don&#8217;t  need to authenticate again.</p>
</div>
<div class="paragraph">
<p>In the upload method, make use of <code>AuthzWebRequest</code>, a special WebRequest that will take care of adding the authentication headers.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>public async void Upload(OAuth2Module module)
{
    var request = AuthzWebRequest.Create("https://www.googleapis.com/upload/drive/v2/files", module);
    request.Method = "POST";

    using (var postStream = await Task&lt;Stream&gt;.Factory.FromAsync(request.BeginGetRequestStream, request.EndGetRequestStream, request))
...</code></pre>
</div>
</div>
</li>
<li>
<p>You are legendary!</p>
<div class="paragraph">
<p>Congratulations, we&#8217;re done here! You followed all the steps to heaven and now it&#8217;s time to celebrate.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_what_s_next">What&#8217;s next?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We&#8217;re constantly improving our API, based on the the open source community, if you think something is missing, file a <a href="https://issues.jboss.org/browse/agsec">Jira</a>.</p>
</div>
<div class="paragraph">
<p>Want to learn more? Go back to <a href="/getstarted/guides/">our guides</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_asking_for_help">Asking for help</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Security can be tricky sometimes, due to numerous misunderstandings and subtle details behind it, so feel free to reach out to us if you have any <a href="/community/#contact">questions</a> or want to provide honest feedback.</p>
</div>
</div>
</div>
      
      </div><!-- col 8 -->
    </div><!-- row -->
  </div><!-- container -->
</section>



<footer>
  <div class="container">
    <div class="row">
      <div class="col-sm-3">
        <h5>Getting Started</h5>
        <ul class="list-unstyled">
          <li><a href="/getting-started/overview/">Overview</a></li>
          <li><a href="/getting-started/installation-and-configuration/">Installation &amp; Configuration</a></li>
          <li><a href="/getting-started/creating-mobile-apps/">Creating Mobile Apps</a></li>
          <li><a href="/getting-started/enabling-mobile-services/">Enabling Mobile Services</a></li>
        </ul>
      </div><!-- col -->

      <div class="col-sm-3">
        <h5>Mobile Services</h5>
        <ul class="list-unstyled">
         <li><a href="/services/mobile-ci-cd/">Mobile CI/CD</a></li>
         <li><a href="/services/push/">Push Notifications</a></li>
         <li><a href="/services/metrics/">Metrics</a></li>
         <li><a href="/services/runtime-connector/">Runtime Connector</a></li>
         <li><a href="/services/identity-management/">Identity Management</a></li>
         <li><a href="/services/device-security/">Device Security</a></li>
        </ul>
      </div><!-- col -->

      <div class="col-sm-3">
        <h5>Mobile SDKs</h5>
        <ul class="list-unstyled">
         <li><a href="/sdks/android/">Android</a></li>
         <li><a href="/sdks/cordova/">Cordova</li>
         <li><a href="/sdks/ios/">iOS</a></li>
         <li><a href="/sdks/xamarin/">Xamarin</a></li>
        </ul>
      </div><!-- col -->
      
      <div class="col-sm-3">
        <h5>COMMUNITY</h5>
        <ul class="list-unstyled">
          <li><a target="_blank" href="https://github.com/aerogear/">GitHub - Aerogear</a></li>
          <li><a target="_blank" href="https://github.com/aerogearcatalog/">GitHub - Aerogear Catalog</a></li>
          <li><a target="_blank" href="https://issues.jboss.org/browse/AEROGEAR">Jira Repo Issues</a></li>
          <li><a  href="/community/contribution-guide/">Contribution Guide</a></li>
          <li><a target="_blank" href="https://groups.google.com/forum/#!forum/aerogear">Google Group</a></li>
          <li><a href="irc://irc.freenode.net/aerogear">IRC</a></li>
        </ul>
      </div><!-- col -->

      <div class="col-sm-12 follow">
        <h5>FOLLOW US</h5>
        <ul class="list-inline">
          <li><a target="_blank" href="https://www.twitter.com/aerogears"><i class="fa fa-twitter-square"></i> Twitter</a></li>
          <li><a target="_blank" href="https://www.facebook.com/AeroGearProject"><i class="fa fa-facebook-square"></i> Facebook</a></li>
          <li><a target="_blank" href="https://plus.google.com/106588661437153585722/posts"><i class="fa fa-google-plus-square"></i> Google+</a></li>
          <li><a target="_blank" href="/feed.atom"><i class="fa fa-rss-square"></i> Feed</a></li>
        </ul>
        
        <p>AeroGear project is licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 License</a></p>
      </div><!-- col -->
    
    </div><!-- row -->

  </div><!-- container -->

</footer><!-- footer -->

<section class="redhat">
  <div class="container">
    <p class="text-center">
      <a href="http://www.redhat.com/">
        <img src="/img/redhatlogo-wite.png" alt="redhatlogo-wite" width="130">
      </a>
    </p>       
  </div><!-- container -->
</section>


<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<!-- <script src="/bower_components/jquery/dist/jquery.min.js"></script> -->

<!-- Include all compiled plugins (below), or include individual files as needed  -->  
<script src="/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>

<!-- My script -->
<script src="/js/script.js"></script>

</body>
</html>